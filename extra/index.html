<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #000000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 200px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .status-text {
            font-size: 20px;
            font-weight: bold;
            margin-top: 10px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        
        .forum {
            display: none;
            width: 80%;
            max-width: 800px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .post {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .post:last-child {
            border-bottom: none;
        }

        .post-title {
            font-weight: bold;
            font-size: 18px;
        }

        .post-content {
            color: #333;
        }

    </style>
</head>
<body>

    <div class="popup" id="popup">
        <div class="spinner" id="status-icon"></div>
        <p class="status-text" id="status-text">Checking...</p>
    </div>

    <div class="forum" id="forum">
        <h2>Forum Posts</h2>
        <div id="posts-container"></div>
    </div>

    <script>
        
        const allowedIPs = ["192.168.1.1", "203.0.113.42", "76.144.37.60"];  

        
        async function getUserIP() {
            try {
                let response = await fetch('https://api64.ipify.org?format=json');  
                let data = await response.json();
                return data.ip;
            } catch (error) {
                console.error("Error fetching IP:", error);
                return null;
            }
        }

        async function checkAccess() {
            let userIP = await getUserIP();
            console.log("User IP:", userIP);

            setTimeout(() => {
                let statusText = document.getElementById("status-text");
                let statusIcon = document.getElementById("status-icon");
                
                if (!allowedIPs.includes(userIP)) {
                    
                    statusText.textContent = "Access Denied!";
                    statusText.style.color = "red";
                    statusIcon.style.animation = "none";
                    statusIcon.style.border = "none";
                    statusIcon.innerHTML = "⚠️"; 
                    
                    setTimeout(() => {
                        window.location.href = "unsafe.html";  
                    }, 2000);
                } else {
                    
                    statusText.textContent = "Access Granted!";
                    statusText.style.color = "green";
                    statusIcon.style.animation = "none";
                    statusIcon.style.border = "none";
                    statusIcon.innerHTML = "✅"; 

                    setTimeout(() => {
                        document.getElementById("popup").style.display = "none";
                        document.getElementById("forum").style.display = "block";
                        loadForumPosts();
                    }, 1000);
                }
            }, 5000);
        }

        function loadForumPosts() {
            fetch("posts.json") 
                .then(response => response.json())
                .then(posts => {
                    let container = document.getElementById("posts-container");
                    container.innerHTML = "";  
                    posts.forEach(post => {
                        let postElement = document.createElement("div");
                        postElement.classList.add("post");
                        postElement.innerHTML = `
                            <div class="post-title">${post.title}</div>
                            <div class="post-content">${post.content}</div>
                        `;
                        container.appendChild(postElement);
                    });
                })
                .catch(error => console.error("Error loading posts:", error));
        }

        
        checkAccess();
    </script>

</body>
</html>
